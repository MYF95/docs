
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Booster Framework Docs</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nn {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nl {
  color: #ffffff;
  background-color: #272822;
}
.highlight .ni {
  color: #ffffff;
  background-color: #272822;
}
.highlight .bp {
  color: #ffffff;
  background-color: #272822;
}
.highlight .vg {
  color: #ffffff;
  background-color: #272822;
}
.highlight .vi {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
  background-color: #272822;
}
.highlight .w {
  color: #ffffff;
  background-color: #272822;
}
.highlight {
  color: #ffffff;
  background-color: #272822;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
  background-color: #272822;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-23b71266.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-bccf8c07.css" rel="stylesheet" media="print" />
      <script src="javascripts/all_nosearch-c275c2f6.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-82dad935.png" class="logo" alt="Logo" />
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#a-bird-39-s-eye-view-of-booster" class="toc-h1 toc-link" data-title="A bird's eye view of Booster">A bird's eye view of Booster</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#think-about-user-actions-not-endpoints" class="toc-h2 toc-link" data-title="Think about user actions, not endpoints">Think about user actions, not endpoints</a>
                  </li>
                  <li>
                    <a href="#time-travel-through-your-data" class="toc-h2 toc-link" data-title="Time travel through your data">Time travel through your data</a>
                  </li>
                  <li>
                    <a href="#data-modelling" class="toc-h2 toc-link" data-title="Data modelling">Data modelling</a>
                  </li>
                  <li>
                    <a href="#combining-and-transforming-your-data" class="toc-h2 toc-link" data-title="Combining and transforming your data">Combining and transforming your data</a>
                  </li>
                  <li>
                    <a href="#graphql-is-hard-who-said-that" class="toc-h2 toc-link" data-title="GraphQL is hard? Who said that?">GraphQL is hard? Who said that?</a>
                  </li>
                  <li>
                    <a href="#fasten-your-seat-belts" class="toc-h2 toc-link" data-title="Fasten your seat belts">Fasten your seat belts</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#installing-booster" class="toc-h1 toc-link" data-title="Installing Booster">Installing Booster</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#supported-operating-systems" class="toc-h2 toc-link" data-title="Supported operating systems">Supported operating systems</a>
                  </li>
                  <li>
                    <a href="#install-node-js" class="toc-h2 toc-link" data-title="Install Node.js">Install Node.js</a>
                  </li>
                  <li>
                    <a href="#set-up-your-aws-account" class="toc-h2 toc-link" data-title="Set up your AWS account">Set up your AWS account</a>
                  </li>
                  <li>
                    <a href="#installing-the-booster-cli" class="toc-h2 toc-link" data-title="Installing the Booster CLI">Installing the Booster CLI</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#your-first-booster-app-in-10-minutes" class="toc-h1 toc-link" data-title="Your first Booster app in 10 minutes">Your first Booster app in 10 minutes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#1-create-project" class="toc-h2 toc-link" data-title="1. Create project">1. Create project</a>
                  </li>
                  <li>
                    <a href="#2-first-command" class="toc-h2 toc-link" data-title="2. First command">2. First command</a>
                  </li>
                  <li>
                    <a href="#3-first-event" class="toc-h2 toc-link" data-title="3. First event">3. First event</a>
                  </li>
                  <li>
                    <a href="#4-first-entity" class="toc-h2 toc-link" data-title="4. First entity">4. First entity</a>
                  </li>
                  <li>
                    <a href="#5-first-read-model" class="toc-h2 toc-link" data-title="5. First read model">5. First read model</a>
                  </li>
                  <li>
                    <a href="#6-deployment" class="toc-h2 toc-link" data-title="6. Deployment">6. Deployment</a>
                  </li>
                  <li>
                    <a href="#7-testing" class="toc-h2 toc-link" data-title="7. Testing">7. Testing</a>
                  </li>
                  <li>
                    <a href="#8-removing-stack" class="toc-h2 toc-link" data-title="8. Removing stack">8. Removing stack</a>
                  </li>
                  <li>
                    <a href="#9-more-functionalities" class="toc-h2 toc-link" data-title="9. More functionalities">9. More functionalities</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#configuration-and-environments" class="toc-h1 toc-link" data-title="Configuration and environments">Configuration and environments</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#booster-configuration" class="toc-h2 toc-link" data-title="Booster configuration">Booster configuration</a>
                  </li>
                  <li>
                    <a href="#environments" class="toc-h2 toc-link" data-title="Environments">Environments</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#architecture-and-core-concepts" class="toc-h1 toc-link" data-title="Architecture and core concepts">Architecture and core concepts</a>
          </li>
          <li>
            <a href="#commands-and-command-handlers-the-write-pipeline" class="toc-h1 toc-link" data-title="Commands and Command Handlers - The Write Pipeline">Commands and Command Handlers - The Write Pipeline</a>
          </li>
          <li>
            <a href="#events" class="toc-h1 toc-link" data-title="Events">Events</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#event-handlers" class="toc-h2 toc-link" data-title="Event Handlers">Event Handlers</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#entities" class="toc-h1 toc-link" data-title="Entities">Entities</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#reading-entity-quot-state-quot" class="toc-h2 toc-link" data-title="Reading Entity "state"">Reading Entity "state"</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#read-models-the-read-pipeline" class="toc-h1 toc-link" data-title="Read Models - The Read Pipeline">Read Models - The Read Pipeline</a>
          </li>
          <li>
            <a href="#authentication-and-authorization" class="toc-h1 toc-link" data-title="Authentication and Authorization">Authentication and Authorization</a>
          </li>
          <li>
            <a href="#deploying" class="toc-h1 toc-link" data-title="Deploying">Deploying</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#configure-your-provider-credentials" class="toc-h2 toc-link" data-title="Configure your provider credentials">Configure your provider credentials</a>
                  </li>
                  <li>
                    <a href="#deploy-your-project" class="toc-h2 toc-link" data-title="Deploy your project">Deploy your project</a>
                  </li>
                  <li>
                    <a href="#deleting-your-cloud-stack" class="toc-h2 toc-link" data-title="Deleting your cloud stack">Deleting your cloud stack</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#your-application-api" class="toc-h1 toc-link" data-title="Your application API">Your application API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#authentication-and-authorization-api" class="toc-h2 toc-link" data-title="Authentication and Authorization API">Authentication and Authorization API</a>
                  </li>
                  <li>
                    <a href="#commands-and-readmodels-api" class="toc-h2 toc-link" data-title="Commands and ReadModels API">Commands and ReadModels API</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#frequently-asked-questions" class="toc-h1 toc-link" data-title="Frequently asked questions">Frequently asked questions</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li>An open-source initiative</li>
            <li>by the team from <a href='https://www.theagilemonkeys.com'>The Agile Monkeys.</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='a-bird-39-s-eye-view-of-booster'>A bird&#39;s eye view of Booster</h1>
<p>Booster was synthesized from years of experience in high availability,
and high performance software scenarios. Most implementation details in
these situations repeat time after time. Booster abstracts them in order
for you to focus on what matters: The domain of your application.</p>

<p>In this section you&#39;ll get a small grasp of how Booster works, but this is
not a full guide.</p>

<p>Just get a taste of Booster, and when you&#39;re ready, you can
<a href="#installing-booster">install Booster</a>,
begin <a href="#your-first-booster-app-in-10-minutes">writing your first Booster app</a>,
or even get into the <a href="#booster-in-depth">in-depth reference documentation</a>.</p>
<h2 id='think-about-user-actions-not-endpoints'>Think about user actions, not endpoints</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">Command</span><span class="p">({</span>
  <span class="na">authorize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="p">,</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">SendMessage</span> <span class="p">{</span>
  <span class="kr">public</span> <span class="kd">constructor</span><span class="p">(</span>
    <span class="nx">readonly</span> <span class="nx">chatroomID</span><span class="p">:</span> <span class="nx">UUID</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">messageContents</span><span class="p">:</span> <span class="nx">string</span>
  <span class="p">)</span> <span class="p">{}</span>

  <span class="kr">public</span> <span class="nx">handle</span><span class="p">(</span><span class="nx">register</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">()</span>
    <span class="nx">register</span><span class="p">.</span><span class="nx">events</span><span class="p">(</span>
      <span class="k">new</span> <span class="nx">MessageSent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">chatroomID</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">messageContents</span><span class="p">,</span> <span class="nx">timestamp</span><span class="p">)</span>
    <span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>A user action is modeled in Booster as a Command.</p>

<p>Similar to controllers, command handlers serve as one of the entry points to your system,
they scale horizontally automatically.</p>

<p>Commands are defined as decorated TypeScript classes with some fields and a <code>handle</code> method.</p>
<h2 id='time-travel-through-your-data'>Time travel through your data</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">Event</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">MessageSent</span> <span class="p">{</span>
  <span class="kr">public</span> <span class="kd">constructor</span><span class="p">(</span>
    <span class="nx">readonly</span> <span class="nx">chatroomID</span><span class="p">:</span> <span class="nx">UUID</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">messageContents</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">timestamp</span><span class="p">:</span> <span class="nb">Date</span>
  <span class="p">)</span> <span class="p">{}</span>

  <span class="kr">public</span> <span class="nx">entityID</span><span class="p">():</span> <span class="nx">UUID</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">chatroomID</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Instead of mutating your data in a database, Booster stores an infinite
stream of events. You get the possibility of seeing how your data changes
through time and space.</p>

<p>Need to fix a bug that happened one year ago? Just change the event generation
and re-run it from the past.</p>

<p>Events, like Commands, are just TypeScript classes. No strings attached.</p>
<h2 id='data-modelling'>Data modelling</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="kr">interface</span> <span class="nx">Message</span> <span class="p">{</span>
  <span class="nl">contents</span><span class="p">:</span> <span class="nx">string</span>
  <span class="nx">hash</span><span class="p">:</span> <span class="nx">string</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Entity</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">Chatroom</span> <span class="p">{</span>
  <span class="kr">public</span> <span class="kd">constructor</span><span class="p">(</span>
    <span class="nx">readonly</span> <span class="nx">id</span><span class="p">:</span> <span class="nx">UUID</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">messages</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">Message</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">lastActivity</span><span class="p">:</span> <span class="nb">Date</span>
  <span class="p">)</span> <span class="p">{}</span>

  <span class="p">@</span><span class="nd">Reduces</span><span class="p">(</span><span class="nx">MessageSent</span><span class="p">)</span>
  <span class="kr">public</span> <span class="kd">static</span> <span class="nx">reduceMessageSent</span><span class="p">(</span><span class="nx">event</span><span class="p">:</span> <span class="nx">MessageSent</span><span class="p">,</span> <span class="nx">prev</span><span class="p">?:</span> <span class="nx">Chatroom</span><span class="p">):</span> <span class="nx">Chatroom</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">message</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">contents</span><span class="p">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">messageContents</span><span class="p">,</span>
      <span class="na">hash</span><span class="p">:</span> <span class="nx">md5sum</span><span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">messageContents</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">prev</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">prev</span><span class="p">.</span><span class="nx">messages</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span>
      <span class="nx">prev</span><span class="p">.</span><span class="nx">lastActivity</span> <span class="o">=</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">timestamp</span> <span class="o">&gt;</span> <span class="nx">prev</span><span class="p">.</span><span class="nx">lastActivity</span>
        <span class="p">?</span> <span class="nx">event</span><span class="p">.</span><span class="nx">timestamp</span>
        <span class="p">:</span> <span class="nx">prev</span><span class="p">.</span><span class="nx">lastActivity</span>
      <span class="k">return</span> <span class="nx">prev</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nx">Chatroom</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">chatroomID</span><span class="p">,</span> <span class="p">[</span><span class="nx">message</span><span class="p">],</span> <span class="nx">event</span><span class="p">.</span><span class="nx">timestamp</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Define your data with TypeScript types, without having to learn a new
data definition language.</p>

<p>Entities are the central part of your domain. They are a representation
of your event stream at some point in time. </p>

<p>You specify the fields of your entity as all the important things that
will be generated from your events. Then you change those fields as events occur.</p>

<p>No alien libraries, no need to think about state of the database,
just plain TypeScript and some cool decorators.</p>

<p>On top of that, Entities serve as automatic snapshots, so your app is
very fast!</p>
<h2 id='combining-and-transforming-your-data'>Combining and transforming your data</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">ReadModel</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">ChatroomActivity</span> <span class="p">{</span>
  <span class="kr">public</span> <span class="kd">constructor</span><span class="p">(</span>
    <span class="nx">readonly</span> <span class="nx">id</span><span class="p">:</span> <span class="nx">UUID</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">lastActivity</span><span class="p">:</span> <span class="nb">Date</span><span class="p">,</span>
  <span class="p">)</span> <span class="p">{}</span>

  <span class="p">@</span><span class="nd">Projects</span><span class="p">(</span><span class="nx">Chatroom</span><span class="p">,</span> <span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">)</span>
  <span class="kr">public</span> <span class="kd">static</span> <span class="nx">updateWithChatroom</span><span class="p">(</span><span class="nx">chatroom</span><span class="p">:</span> <span class="nx">Chatroom</span><span class="p">,</span> <span class="nx">prev</span><span class="p">?:</span> <span class="nx">ChatroomActivity</span><span class="p">):</span> <span class="nx">ChatroomActivity</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">ChatroomActivity</span><span class="p">(</span><span class="nx">chatroom</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">chatroom</span><span class="p">.</span><span class="nx">lastActivity</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Most of the time, you don&#39;t want to expose all the data you are storing
in your system. You might want to hide some parts, transform others.</p>

<p>Also, you might want to combine some entities into one object, so the
client can read them more efficiently.</p>

<p>Read models allow you to do all that. With them you can get your data delivered 
in the shape that you want, instantly to your client. Booster will push the changes
live, so you only have to focus on consuming it in the way you require.</p>
<h2 id='graphql-is-hard-who-said-that'>GraphQL is hard? Who said that?</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="c"># Send a command</span><span class="w">
</span><span class="k">mutation</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">SendMessage</span><span class="p">(</span><span class="w">
    </span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">chatroomID</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="n">messageContents</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello Booster!"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c"># Subscribe to a read model</span><span class="w">
</span><span class="k">subscription</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">ChatroomActivity</span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">lastActivity</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>GraphQL is nice on the client side, but on the backend, it requires you
to do quite some work. Defining resolvers, schema, operations, and
friends take some time, and it is not the most thrilling work you can
do. Especially when your domain has nothing to do with managing a GraphQL
API.</p>

<p>Each Command is mapped to a GraphQL mutation, and each ReadModel is mapped
to a GraphQL query or subscription.</p>

<p>Just write your Booster app as you would do normally, and enjoy a GraphQL
API for free, with its schema, operations, and everything.</p>

<p>Check the <a href="#your-application-api">API documentation</a> to learn more.</p>
<h2 id='fasten-your-seat-belts'>Fasten your seat belts</h2>
<p>This is a simplified view of Booster. It supports many other features
that will definitely speed-up your development process. Among them:</p>

<ul>
<li>Automatic Migrations - with them you can easily introduce changes in your data</li>
<li>Versioning - to do stuff like A/B testing</li>
<li>Authentication - integrated with your cloud provider, so you don&#39;t have to manage security yourself</li>
</ul>

<p>All of this under the best practices of security and privacy of your cloud provider.
Booster defaults to the strictest option, so you don&#39;t have to worry about security
configuration beforehand.</p>

<p>Thrilled already? Jump to <a href="#installing-booster">the installation steps</a>, read
<a href="#your-first-booster-app-in-10-minutes">how to write your first Booster app</a>, and
join the community in the <a href="https://spectrum.chat/boostercloud">Spectrum chat</a>.</p>
<h1 id='installing-booster'>Installing Booster</h1><h2 id='supported-operating-systems'>Supported operating systems</h2>
<p>You can develop with Booster using any of the following operating systems:</p>

<ul>
<li>Linux</li>
<li>MacOS</li>
<li>Windows (Native and WSL)</li>
</ul>

<p>Booster hasn&#39;t been tested under other platforms like BSD, if you want to
develop under those, proceed at your own risk!</p>
<h2 id='install-node-js'>Install Node.js</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># Ubuntu</span>
<span class="nv">$ </span>curl <span class="nt">-sL</span> https://deb.nodesource.com/setup_14.x | <span class="nb">sudo</span> <span class="nt">-E</span> bash -
<span class="nv">$ </span><span class="nb">sudo </span>apt <span class="nb">install </span>nodejs

<span class="c"># MacOS</span>
<span class="nv">$ </span>brew <span class="nb">install </span>node

<span class="c"># Windows</span>
<span class="o">&gt;</span> choco <span class="nb">install </span>nodejs
</code></pre></div>
<p>Booster is a TypeScript framework that benefits from the Node.js ecosystem, it
has been tested under versions newer than <code>v12</code>, so make sure that you install one
accordingly.</p>

<p>If you don&#39;t have Node.js installed, you can download an installer <a href="https://nodejs.org/en/">from it&#39;s website</a>, or you can install it using your system&#39;s
package manager.</p>

<ul>
<li><strong>Ubuntu</strong> - using <a href="https://wiki.debian.org/Apt"><code>apt</code></a></li>
<li><strong>MacOS</strong> - using <a href="https://brew.sh/"><code>brew</code></a></li>
<li><strong>Windows</strong> - using <a href="https://chocolatey.org/"><code>chocolatey</code></a></li>
</ul>

<p>If for some reason you are working with other projects that require a different
Node.js version, we recommend that you use a version manager like:</p>

<ul>
<li><a href="https://github.com/nvm-sh/nvm"><code>nvm</code></a> - Works with MacOS, Linux and WSL</li>
<li><a href="https://github.com/coreybutler/nvm-windows"><code>nvm-windows</code></a> - Works with native Windows</li>
</ul>

<blockquote>
<p>Verify your Node.js and <code>npm</code> versions</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="nv">$ </span>node <span class="nt">-v</span>
v13.12.0

<span class="nv">$ </span>npm <span class="nt">-v</span>
6.14.4
</code></pre></div>
<p>After you&#39;ve installed Node.js, you can verify that it was installed properly by
checking so from your terminal.</p>

<p>Make sure that Node.js is newer than <code>v12</code> and <code>npm</code> (comes installed with Node.js) is newer than <code>6</code>.</p>
<h2 id='set-up-your-aws-account'>Set up your AWS account</h2>
<p>Booster is a cloud-native framework, meaning that your application will be deployed
to the cloud, using different cloud services. Right now, it only supports AWS, but
given Booster&#39;s abstractions, a provider package can be easily created to support
other cloud providers.</p>

<p>To follow the documentation locally and get a grip of Booster, you don&#39;t need a
cloud provider, but to deploy, and test your application, you will need it.</p>

<aside class="warning">
<b>Note:</b> Booster is and always will be free, but the resources you use in AWS
are not.
Most of them are pay-per-use, which means that your system is absolutely free as
long as no one is using it, <b>but some aren't</b>.
</br>
</br>
Right now the cost of an idle Booster application is approximately <b>$12 per month</b>
or the equivalent to the fraction of time you have it running
(e.g. <b>$3 per week</b>). This is mainly due to
<a href="https://aws.amazon.com/kinesis/">AWS Kinesis</a>.
The Booster contributors are working hard to remove this resource in the best way
possible, so you can enjoy developing production-ready, cloud-native apps without
paying for idling.
</aside>

<p>Now it is a good time to create that AWS account, you can do so from
<a href="https://portal.aws.amazon.com/billing/signup">the AWS console registration</a>.</p>

<p>Once you&#39;ve registered yourself, you will need to configure your system to use your
account. To do so, login into the <a href="https://console.aws.amazon.com">AWS Console</a>, and
click on your account name on the top-right corner.</p>

<p><img src="images/aws-account-menu-c0ee1696.png" alt="aws account menu location" /></p>

<p>A menu will open, click on <strong>My security credentials</strong> and it will take you to the
Identity and Access Management panel. Once there, create an access key:</p>

<p><img src="images/aws-create-access-key-51b14c56.png" alt="create access key button location" /></p>

<p>A pop-up will appear, <strong>don&#39;t close it!</strong>.</p>
<div class="highlight"><pre class="highlight ini tab-ini"><code><span class="nn">[default]</span>
<span class="py">aws_access_key_id</span> <span class="p">=</span> <span class="s">&lt;YOUR ACCESS KEY ID&gt;</span>
<span class="py">aws_secret_access_key</span> <span class="p">=</span> <span class="s">&lt;YOUR SECRET ACCESS KEY&gt;</span>
</code></pre></div>
<p>Now create a folder called <code>.aws</code> under your home folder, and a file called
<code>credentials</code> inside of it.</p>

<p>Paste the template you see on the right, and fill with the keys that appeared
in the popup of the website. Save the file. You are ready to go!</p>
<h2 id='installing-the-booster-cli'>Installing the Booster CLI</h2>
<p>Booster comes with a command line tool that generates boilerplate code, and also,
deploys, and deletes your application resources in the cloud.</p>
<h3 id='installing-using-npm'>Installing using <code>npm</code></h3><div class="highlight"><pre class="highlight shell tab-shell"><code>npm <span class="nb">install</span> <span class="nt">--global</span> @boostercloud/cli
</code></pre></div>
<p>All stable versions are published to <a href="https://npmjs.com"><code>npm</code></a>, to install the
Booster CLI, use the command on the right.</p>

<p>These versions are the recommended ones, as they are well documented, and the
changes are stated in the release notes.</p>
<h3 id='installing-the-development-version'>Installing the development version</h3>
<p>If you like to live on the bleeding edge, you might want to install the development
version, but beware, <strong>here might be bugs and unstable features!</strong></p>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># Inside a terminal</span>
<span class="nv">$ </span>npm <span class="nb">install</span> <span class="nt">-g</span> verdaccio

<span class="c"># Open a new terminal, and run this command</span>
<span class="nv">$ </span>verdaccio

<span class="c"># Go back to the first terminal</span>
<span class="nv">$ </span>npm adduser <span class="nt">--registry</span> http://localhost:4873
<span class="nv">$ </span>git clone git@github.com:boostercloud/booster.git
<span class="nv">$ </span><span class="nb">cd </span>booster
<span class="nv">$ </span>lerna publish <span class="nt">--registry</span> http://localhost:4873 <span class="nt">--no-git-tag-version</span> <span class="nt">--canary</span>
<span class="c"># Specify some version that you will remember here, i.e. 0.3.0-my-alpha</span>
<span class="nv">$ </span>git stash <span class="nt">-u</span>
<span class="nv">$ </span>npm <span class="nb">install</span> <span class="nt">--registry</span> http://localhost:4873 @boostercloud/cli
</code></pre></div>
<p>Make sure that you have <a href="https://git-scm.com/">Git</a> installed. You can verify this
by running <code>git help</code>.</p>

<p>Follow the steps on the right, they will:</p>

<ul>
<li>Install <a href="https://verdaccio.org/"><code>verdaccio</code></a>, an <code>npm</code> local proxy</li>
<li>Run <code>verdaccio</code>, and register yourself locally</li>
<li>Get the Booster source code</li>
<li>Install <code>lerna</code>, the tool that manages all the Booster packages</li>
<li>Publish the Booster version locally</li>
<li>Install the Booster development version</li>
</ul>

<p>If everything went correctly, you should have the Booster CLI installed.</p>

<aside class="notice">
Remember to change the dependency versions in your project's <code>package.json</code> to the version you've specified by following the steps.
</br>
</br>
Also, when installing the dependencies, you have to specify the registry like so:
</br>
<code>
$ npm install --registry http://localhost:4873
</code>
</aside>
<h3 id='verify-that-you-have-booster-installed'>Verify that you have Booster installed</h3>
<p>To verify that the Booster installation was successful, enter the following
command into your terminal: <code>boost version</code></p>

<p>If everything went well, you should get something like <code>@boostercloud/cli/0.3.0</code></p>

<p>You are now ready to <a href="#your-first-booster-app">write your first Booster app</a>!</p>
<h1 id='your-first-booster-app-in-10-minutes'>Your first Booster app in 10 minutes</h1>
<p>In this section, we will go through all the necessary steps to have the backend for a blog application up and running in a few minutes.</p>

<p>The steps to follow will be:</p>

<ul>
<li><a href="#1-create-the-project">Create project</a></li>
<li><a href="#2-first-command">First command</a></li>
<li><a href="#3-first-event">First event</a></li>
<li><a href="#4-first-entity">First entity</a></li>
<li><a href="#5-first-read-model">First read model</a></li>
<li><a href="#6-deployment">Deployment</a></li>
<li><a href="#7-testing">Testing</a>

<ul>
<li><a href="#71-creating-posts">Creating posts</a></li>
<li><a href="#72-retrieving-all-posts">Retrieving all posts</a></li>
<li><a href="#73-retrieving-specific-post">Retrieving specific post</a></li>
</ul></li>
<li><a href="#8-removing-stack">Removing stack</a></li>
<li><a href="#9-further-improvements">Further improvements</a></li>
</ul>
<h2 id='1-create-project'>1. Create project</h2>
<blockquote>
<p>Create project</p>
</blockquote>
<div class="highlight"><pre class="highlight shell"><code>boost new:project &lt;project-name&gt;
</code></pre></div>
<p>First of all, we need to create a base Booster project. To do so, we will use the Booster CLI, which
can be invoked by typing <code>boost</code> inside of a terminal.</p>
<div class="highlight"><pre class="highlight plaintext"><code>|- &lt;your-project-name&gt;
  |- src
    |- commands
    |- common
    |- entities
    |- events
    |- read-models
    ...
</code></pre></div>
<p>It will generate a folder
with your selected project name.</p>

<p>You will need to answer a few questions in order to configure the project. The last step asks you about a <em>provider package</em>, for this tutorial, select <em>AWS</em>.</p>

<p>Once the project has been successfully created, you will need to move to the new directory, you can do so by typing <code>cd &lt;your project name&gt;</code> in a terminal. </p>

<p>Now open the project in your most preferred IDE, e.g. <a href="https://code.visualstudio.com/">Visual Studio Code</a>.</p>
<h2 id='2-first-command'>2. First command</h2>
<p>We will now define our first command, which will allow us to create posts in our blog.</p>

<blockquote>
<p>New command</p>
</blockquote>
<div class="highlight"><pre class="highlight shell"><code>boost new:command CreatePost <span class="nt">--fields</span> postId:UUID title:string content:string author:string
</code></pre></div>
<p>In a terminal, from the root of your project, type:</p>
<div class="highlight"><pre class="highlight plaintext"><code>|- &lt;your-project-name&gt;
  |- src
    |- commands/CreatePost.ts
</code></pre></div>
<p>These commands creates most of the code for us, which can be seen in</p>

<p>However, we still need to define a couple of things in this file:</p>

<ul>
<li>Who can trigger our command</li>
<li>What events should be triggered</li>
</ul>

<p>For the first part, we will let anyone to trigger it. To do so, configure the <code>authorize</code> command option to <code>&quot;all&quot;</code> (yes, between quotes, it is a string). If you cannot find it, it is right after the <code>@Command</code> decorator.</p>

<p>Additionally, the current <code>CreatePost</code> command will not trigger any event, so we will have to come back later to set the event that this command will fire up. This is done in the <code>handle</code> method of the command class. Leave it as it is for now.</p>

<blockquote>
<p><code>CreatePost</code> command</p>
</blockquote>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">Command</span><span class="p">({</span>
  <span class="na">authorize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="c1">// Specify authorized roles here. Use 'all' to authorize anyone</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CreatePost</span> <span class="p">{</span>
  <span class="kr">public</span> <span class="kd">constructor</span><span class="p">(</span>
    <span class="nx">readonly</span> <span class="nx">postId</span><span class="p">:</span> <span class="nx">UUID</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">title</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">content</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">author</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
  <span class="p">)</span> <span class="p">{}</span>

  <span class="kr">public</span> <span class="nx">handle</span><span class="p">(</span><span class="nx">register</span><span class="p">:</span> <span class="nx">Register</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="nx">register</span><span class="p">.</span><span class="nx">events</span><span class="p">(</span> <span class="cm">/* YOUR EVENT HERE */</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<p>If everything went well, you should have now the code you can see on the right.</p>
<h2 id='3-first-event'>3. First event</h2>
<blockquote>
<p>New event</p>
</blockquote>
<div class="highlight"><pre class="highlight shell"><code>boost new:event PostCreated <span class="nt">--fields</span> postId:UUID title:string content:string author:string
</code></pre></div>
<p>In this type of backend architectures, events can be triggered by commands or by other events. We will create an event that defines a <code>Post</code> creation. </p>
<div class="highlight"><pre class="highlight plaintext"><code>|- &lt;your-project-name&gt;
  |- src
    |- events/PostCreated.ts
</code></pre></div>
<p>You will realize that a new file has been created:</p>

<blockquote>
<p>Define entity id</p>
</blockquote>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="kr">public</span> <span class="nx">entityID</span><span class="p">():</span> <span class="nx">UUID</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">postId</span>
<span class="p">}</span>
</code></pre></div>
<p>There is one small thing that we have to define in the above file, which is the returned value for <code>EntityID()</code>. We will set the post <code>UUID</code>. It should look like this:</p>

<blockquote>
<p><code>PostCreated</code> event</p>
</blockquote>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">Event</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">PostCreated</span> <span class="p">{</span>
  <span class="kr">public</span> <span class="kd">constructor</span><span class="p">(</span>
    <span class="nx">readonly</span> <span class="nx">postId</span><span class="p">:</span> <span class="nx">UUID</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">title</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">content</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">author</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
  <span class="p">)</span> <span class="p">{}</span>

  <span class="kr">public</span> <span class="nx">entityID</span><span class="p">():</span> <span class="nx">UUID</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">postId</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Your event should look like this:</p>

<blockquote>
<p>Add event to <code>CreatePost</code> Command</p>
</blockquote>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="kr">public</span> <span class="nx">handle</span><span class="p">(</span><span class="nx">register</span><span class="p">:</span> <span class="nx">Register</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
  <span class="nx">register</span><span class="p">.</span><span class="nx">events</span><span class="p">(</span><span class="k">new</span> <span class="nx">PostCreated</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">postId</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">author</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div>
<p>Now we can go back to the command we created before and add our new event <code>PostCreated</code> to the register of events. Your <code>handle</code> should look like this:</p>
<h2 id='4-first-entity'>4. First entity</h2>
<blockquote>
<p>New entity</p>
</blockquote>
<div class="highlight"><pre class="highlight shell"><code>boost new:entity Post <span class="nt">--fields</span> title:string content:string author:string <span class="nt">--reduces</span> PostCreated
</code></pre></div>
<p>We have now created a command and an event, however, we do not have any data representation of a <code>Post</code>. As a result, we will create an <code>entity</code>.</p>
<div class="highlight"><pre class="highlight plaintext"><code>|- &lt;your-project-name&gt;
  |- src
    |- entities/Post.ts
</code></pre></div>
<p>Another file has been created in your project, you will need to add the implementation of its reduction:</p>

<blockquote>
<p>Reduction</p>
</blockquote>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">Reduces</span><span class="p">(</span><span class="nx">PostCreated</span><span class="p">)</span>
<span class="kr">public</span> <span class="kd">static</span> <span class="nx">reducePostCreated</span><span class="p">(</span><span class="nx">event</span><span class="p">:</span> <span class="nx">PostCreated</span><span class="p">,</span> <span class="nx">currentPost</span><span class="p">?:</span> <span class="nx">Post</span><span class="p">):</span> <span class="nx">Post</span> <span class="p">{</span>
<span class="k">return</span> <span class="k">new</span> <span class="nx">Post</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">postId</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">content</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">author</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>In the future, we may want to <em>project</em> events for this <code>Post</code> entity that require retrieving current <code>Post</code> values. In that case we would need to make use of <code>currentPost</code> argument. </p>

<blockquote>
<p><code>Post</code> entity</p>
</blockquote>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">Entity</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">Post</span> <span class="p">{</span>
  <span class="kr">public</span> <span class="kd">constructor</span><span class="p">(</span>
    <span class="kr">public</span> <span class="nx">id</span><span class="p">:</span> <span class="nx">UUID</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">title</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">content</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">author</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
  <span class="p">)</span> <span class="p">{}</span>

  <span class="p">@</span><span class="nd">Reduces</span><span class="p">(</span><span class="nx">PostCreated</span><span class="p">)</span>
  <span class="kr">public</span> <span class="kd">static</span> <span class="nx">reducePostCreated</span><span class="p">(</span><span class="nx">event</span><span class="p">:</span> <span class="nx">PostCreated</span><span class="p">,</span> <span class="nx">currentPost</span><span class="p">?:</span> <span class="nx">Post</span><span class="p">):</span> <span class="nx">Post</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">Post</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">postId</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">content</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">author</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The full code for the entity can be seen on the right.</p>
<h2 id='5-first-read-model'>5. First read model</h2>
<blockquote>
<p>New read model</p>
</blockquote>
<div class="highlight"><pre class="highlight shell"><code>boost new:read-model PostReadModel <span class="nt">--fields</span> title:string content:string author:string <span class="nt">--projects</span> Post:id
</code></pre></div>
<p>Almost everything is set-up. We just need to provide a way to view the <code>Posts</code> of our blog. For that, we will create a <code>read model</code>.</p>
<div class="highlight"><pre class="highlight plaintext"><code>|- &lt;your-project-name&gt;
  |- src
    |- read-models/PostReadModel.ts
</code></pre></div>
<p>Once the read-model code has been generated, we will also need to define a few things:</p>

<ul>
<li>Who can read the <code>Posts</code></li>
<li>How the data is manipulated before returning it</li>
</ul>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">ReadModel</span><span class="p">({</span>
  <span class="na">authorize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="c1">// Specify authorized roles here. Use 'all' to authorize anyone</span>
<span class="p">})</span>
</code></pre></div>
<p>To make it easy, we will allow anyone to read it:</p>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">Projects</span><span class="p">(</span><span class="nx">Post</span><span class="p">,</span> <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">)</span>
<span class="kr">public</span> <span class="kd">static</span> <span class="nx">projectPost</span><span class="p">(</span><span class="nx">entity</span><span class="p">:</span> <span class="nx">Post</span><span class="p">,</span> <span class="nx">currentPostReadModel</span><span class="p">?:</span> <span class="nx">PostReadModel</span><span class="p">):</span> <span class="nx">PostReadModel</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nx">PostReadModel</span><span class="p">(</span><span class="nx">entity</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">entity</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">entity</span><span class="p">.</span><span class="nx">content</span><span class="p">,</span> <span class="nx">entity</span><span class="p">.</span><span class="nx">author</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>and we will project the whole entity</p>

<blockquote>
<p><code>PostReadModel</code> read model</p>
</blockquote>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">ReadModel</span><span class="p">({</span>
  <span class="na">authorize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="c1">// Specify authorized roles here. Use 'all' to authorize anyone</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">PostReadModel</span> <span class="p">{</span>
  <span class="kr">public</span> <span class="kd">constructor</span><span class="p">(</span>
    <span class="kr">public</span> <span class="nx">id</span><span class="p">:</span> <span class="nx">UUID</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">title</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">content</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">author</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
  <span class="p">)</span> <span class="p">{}</span>

  <span class="p">@</span><span class="nd">Projects</span><span class="p">(</span><span class="nx">Post</span><span class="p">,</span> <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">)</span>
  <span class="kr">public</span> <span class="kd">static</span> <span class="nx">projectPost</span><span class="p">(</span><span class="nx">entity</span><span class="p">:</span> <span class="nx">Post</span><span class="p">,</span> <span class="nx">currentPostReadModel</span><span class="p">?:</span> <span class="nx">PostReadModel</span><span class="p">):</span> <span class="nx">PostReadModel</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">PostReadModel</span><span class="p">(</span><span class="nx">entity</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">entity</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">entity</span><span class="p">.</span><span class="nx">content</span><span class="p">,</span> <span class="nx">entity</span><span class="p">.</span><span class="nx">author</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The read model should look like the code on the right:</p>
<h2 id='6-deployment'>6. Deployment</h2><div class="highlight"><pre class="highlight shell"><code>boost deploy <span class="nt">-e</span> production
</code></pre></div>
<p>Everything we need for a basic project is set. It is time to deploy it:</p>

<p>It will take a couple of minutes to deploy all the resources.</p>

<blockquote>
<p>Example GraphQL endpoint</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>https://&lt;some random number&gt;.execute-api.us-east-1.amazonaws.com/production/graphql
</code></pre></div>
<p>When the the serverless backend is successfully deployed you will see information about your stack endpoints. For this basic project we will only need to pick the REST API endpoint, reflected in the output as <code>backend-application-stack.baseRESTURL</code>, and append <code>/graphql</code> at the end, e.g.:</p>

<p>We will use this GraphQL API endpoint to test our backend.</p>
<h2 id='7-testing'>7. Testing</h2>
<p>Let&#39;s get started testing the project. We will perform three actions:</p>

<ul>
<li>Add a couple of posts</li>
<li>Retrieve all posts</li>
<li>Retrieve a specific post</li>
</ul>

<p>To perform the GraphQL queries, you might want to use something like <a href="https://postwoman.io/graphql">Postwoman</a>, although <code>curl</code> would also work.</p>
<h3 id='7-1-creating-posts'>7.1 Creating posts</h3>
<blockquote>
<p>The first GraphQL mutation:</p>
</blockquote>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="p">{</span><span class="w"> 
    </span><span class="n">CreatePost</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">postId</span><span class="p">:</span><span class="w"> </span><span class="s2">"95ddb544-4a60-439f-a0e4-c57e806f2f6e"</span><span class="p">,</span><span class="w">
        </span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is my first post"</span><span class="p">,</span><span class="w">
        </span><span class="n">content</span><span class="p">:</span><span class="w"> </span><span class="s2">"I am so excited to write my first post"</span><span class="p">,</span><span class="w">
        </span><span class="n">author</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some developer"</span><span class="w">
    </span><span class="p">})</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>The second GraphQL mutation:</p>
</blockquote>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="p">{</span><span class="w"> 
    </span><span class="n">CreatePost</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">postId</span><span class="p">:</span><span class="w"> </span><span class="s2">"05670e55-fd31-490e-b585-3a0096db0412"</span><span class="p">,</span><span class="w">
        </span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is my second post"</span><span class="p">,</span><span class="w">
        </span><span class="n">content</span><span class="p">:</span><span class="w"> </span><span class="s2">"I am so excited to write my second post"</span><span class="p">,</span><span class="w">
        </span><span class="n">author</span><span class="p">:</span><span class="w"> </span><span class="s2">"The other developer"</span><span class="w">
    </span><span class="p">})</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>We will perform two GraphQL <code>mutation</code> queries in order to add information:</p>

<blockquote>
<p>The expected response for each of the requests above should be:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"CreatePost"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>We should now have two <code>Posts</code> in our backend, no authorization header is required since we have allowed <code>all</code> access to our commands and read models.</p>

<blockquote>
<p>GraphQL query, all posts</p>
</blockquote>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">query</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">PostReadModels</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
      </span><span class="n">title</span><span class="w">
      </span><span class="n">content</span><span class="w">
      </span><span class="n">author</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='7-2-retrieving-all-posts'>7.2 Retrieving all posts</h3>
<p>In order to retrieve the information we just sent, lets perform a GraphQL <code>query</code> that will be hitting our read model <code>PostReadModel</code>:</p>

<blockquote>
<p>Query all posts response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"PostReadModels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05670e55-fd31-490e-b585-3a0096db0412"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is my second post"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I am so excited to write my second post"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The other developer"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"95ddb544-4a60-439f-a0e4-c57e806f2f6e"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is my first post"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I am so excited to write my first post"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some developer"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>You should expect a response similar to this:</p>

<blockquote>
<p>GraphQL query, specific posts</p>
</blockquote>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">query</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">PostReadModel</span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s2">"95ddb544-4a60-439f-a0e4-c57e806f2f6e"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
      </span><span class="n">title</span><span class="w">
      </span><span class="n">content</span><span class="w">
      </span><span class="n">author</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='7-3-retrieving-specific-post'>7.3 Retrieving specific post</h3>
<p>It is also possible to retrieve specific a <code>Post</code> by adding the <code>id</code> as input, e.g.:</p>

<blockquote>
<p>Query specific posts response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"PostReadModel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"95ddb544-4a60-439f-a0e4-c57e806f2f6e"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is my first post"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I am so excited to write my first post"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some developer"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>You should expect a response similar to this:</p>
<h2 id='8-removing-stack'>8. Removing stack</h2>
<p>Now, let&#39;s undeploy our backend. </p>

<aside class="warning">
<b>Remember:</b> It costs you money to have it on idle!
</aside>

<blockquote>
<p>Undeploy stack</p>
</blockquote>
<div class="highlight"><pre class="highlight shell"><code>boost nuke <span class="nt">-e</span> production
</code></pre></div>
<p>To do so, execute the following command from the root of your project, in a terminal:</p>

<p>It will ask you to verify the project name, it will be the same one that it was written when we created the project. If you don&#39;t remember the name, go to <code>config/production.ts</code> and copy the <code>name</code> field. </p>
<h2 id='9-more-functionalities'>9. More functionalities</h2>
<p>The are many other options for your serverless backend built with Booster Framework:</p>

<ul>
<li>GraphQL subscriptions</li>
<li>Securing requests depending on user roles</li>
<li>Events that trigger more events</li>
<li>Reading entity snapshots in handlers to apply domain-driven decisions</li>
<li>and much more...</li>
</ul>

<p>But we won&#39;t be covering them in this section. Keep reading if you want to know more!</p>

<aside class="success">
Congratulations! you've built a serverless backend in less than 10 minutes. We hope you have enjoyed discovering the magic of Booster Framework, please keep reading if you want to know more about it.
</aside>
<h1 id='configuration-and-environments'>Configuration and environments</h1>
<p>One of the goals of booster is to avoid configuration parameters as much as
possible, inferring everything automatically from your code. However, there
are some aspects that can&#39;t be inferred (like the application name), or it
is useful to change them under certain circumstances, especially when using
different <a href="#environments">environments</a></p>
<h2 id='booster-configuration'>Booster configuration</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Booster</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@boostercloud/framework-core</span><span class="dl">'</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BoosterConfig</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@boostercloud/framework-types</span><span class="dl">'</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Provider</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@boostercloud/framework-provider-aws</span><span class="dl">'</span>

<span class="nx">Booster</span><span class="p">.</span><span class="nx">configure</span><span class="p">(</span><span class="dl">'</span><span class="s1">pre-production</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">config</span><span class="p">:</span> <span class="nx">BoosterConfig</span><span class="p">):</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">config</span><span class="p">.</span><span class="nx">appName</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">my-app-name</span><span class="dl">'</span>
  <span class="nx">config</span><span class="p">.</span><span class="nx">provider</span> <span class="o">=</span> <span class="nx">Provider</span>
<span class="p">})</span>
</code></pre></div>
<p>You configure your application by doing a call to the <code>Booster.configure()</code> method. 
There are no restrictions about where you should do this call, but the convention is to do it in your configuration files 
located in the <code>src/config</code> folder. If you used the project generator (<code>boost new:project &lt;project-name&gt;</code>), this is 
where the config files are by default.</p>

<p>The following is the list of the fields you can configure:</p>

<ul>
<li><strong>appName:</strong> This is the name that identifies your application. It will be used
for many things, such us prefixing the resources created by the provider. There
are certain restrictions regarding the characters you can use: all of them must be
lower-cased and can&#39;t contain spaces.
Two apps with different names are completely independent.</li>
<li><strong>provider:</strong> This field contains the provider library instance that Booster will use when deploying
or running your application. So far, there is only one provider supported in Booster yet,
<code>@boostercloud/framework-provider-aws</code>, and it is probably the one you have already
set if you used the generator to create your project. There will be more providers,
like one that allows running your Booster app locally.</li>
</ul>
<h2 id='environments'>Environments</h2>
<p>You can configure multiple environments calling to the <code>Booster.configure</code> function several times using different environment names:</p>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Booster</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@boostercloud/framework-core</span><span class="dl">'</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BoosterConfig</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@boostercloud/framework-types</span><span class="dl">'</span>
<span class="c1">// A provider that deploys your app to AWS:</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AWSProvider</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@boostercloud/framework-provider-aws</span><span class="dl">'</span>
<span class="c1">// A provider that deploys your app locally:</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">LocalProvider</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@boostercloud/framework-provider-local</span><span class="dl">'</span> 

<span class="nx">Booster</span><span class="p">.</span><span class="nx">configure</span><span class="p">(</span><span class="dl">'</span><span class="s1">dev</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">config</span><span class="p">:</span> <span class="nx">BoosterConfig</span><span class="p">):</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">config</span><span class="p">.</span><span class="nx">appName</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">fruit-store-dev</span><span class="dl">'</span>
  <span class="nx">config</span><span class="p">.</span><span class="nx">provider</span> <span class="o">=</span> <span class="nx">LocalProvider</span>
<span class="p">})</span>

<span class="nx">Booster</span><span class="p">.</span><span class="nx">configure</span><span class="p">(</span><span class="dl">'</span><span class="s1">stage</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">config</span><span class="p">:</span> <span class="nx">BoosterConfig</span><span class="p">):</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">config</span><span class="p">.</span><span class="nx">appName</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">fruit-store-stage</span><span class="dl">'</span>
  <span class="nx">config</span><span class="p">.</span><span class="nx">provider</span> <span class="o">=</span> <span class="nx">AWSProvider</span>
<span class="p">})</span>

<span class="nx">Booster</span><span class="p">.</span><span class="nx">configure</span><span class="p">(</span><span class="dl">'</span><span class="s1">prod</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">config</span><span class="p">:</span> <span class="nx">BoosterConfig</span><span class="p">):</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">config</span><span class="p">.</span><span class="nx">appName</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">fruit-store-prod</span><span class="dl">'</span>
  <span class="nx">config</span><span class="p">.</span><span class="nx">provider</span> <span class="o">=</span> <span class="nx">AWSProvider</span>
<span class="p">})</span>

<span class="c1">// This other configuration could be in another file that Pepe doesn't commit</span>
<span class="nx">Booster</span><span class="p">.</span><span class="nx">configure</span><span class="p">(</span><span class="dl">'</span><span class="s1">pepe</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">config</span><span class="p">:</span> <span class="nx">BoosterConfig</span><span class="p">):</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">config</span><span class="p">.</span><span class="nx">appName</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">pepe-fruit-store</span><span class="dl">'</span>
  <span class="nx">config</span><span class="p">.</span><span class="nx">provider</span> <span class="o">=</span> <span class="nx">AWSProvider</span>
<span class="p">})</span>
</code></pre></div>
<p>The environment name will be required by any command from the Booster CLI that depends on the provider. 
For instance, when you deploy your application, you&#39;ll need to specify which environment you want to deploy.</p>

<p>This way, you can have different configurations depending on your needs. </p>

<p>For example, your <em>&#39;fruit-store&#39;</em> app can have three environments: <code>&#39;dev&#39;</code>, <code>&#39;stage&#39;</code>, and <code>&#39;prod&#39;</code>, each of them with
different app names or providers. 
A developer named &quot;Pepe&quot; could have another environment with a different app name so that he can deploy the
entire application to a production-like environment and test it. Check the example to see how this app would be
configured.</p>

<aside class="notice">
The only thing you need to do to deploy a whole new completely-independent copy of your application is to use 
a different name.
</aside>
<h1 id='architecture-and-core-concepts'>Architecture and core concepts</h1>
<p>Booster’s architecture is heavily inspired by the <a href="https://www.martinfowler.com/bliki/CQRS.html">CQRS</a> and <a href="https://martinfowler.com/eaaDev/EventSourcing.html">Event Sourcing</a> patterns.
These patterns have proven to work well for highly-distributed high available systems, being a tool to make resilient
software that is fast and scales very well, especially in distributed scenarios.</p>

<p>The Booster high-level architecture diagram looks like this:
<img src="images/booster-arch-826f249e.png" alt="Booster architecture" /></p>

<p>With these patterns combined, in a Booster Application:</p>

<ul>
<li>The <em>write operations</em> are separated from the <em>read operations</em> (called <a href="#commands-and-command-handlers-the-write-pipeline"><em>commands</em></a> and <a href="#read-models-the-read-pipeline"><em>queries</em></a>, respectively) and dependencies are limited to data.</li>
<li>Instead of storing and mutating the data in a single stateful database, Booster stores the state as a virtually infinite append-only list of events (think of your bank account, where all the movements are stored as individual movements).</li>
<li>The event stream is the system source of truth, and the &quot;current state&quot; can be queried anytime reducing it on the fly as <a href="#entities">entities</a>.</li>
</ul>

<p>This architecture has many advantages:</p>

<ul>
<li>The whole architecture is designed for high availability and eventual consistency.</li>
<li>The code is much easier to change because modules are loosely coupled.</li>
<li>Old code can live along with new code without affecting each other, so it&#39;s easier to smoothly test and introduce new features.</li>
<li>System boundaries are clearly defined and are easy to maintain.</li>
</ul>

<p>It&#39;s usually non-trivial to get event-driven architecture design right and implement a maintainable event-driven solution that scales, but Booster has been built around these concepts and will greatly help you and your team to keep things under control. Booster integrates event-driven design in a way that simplifies their usage and understanding.</p>
<h1 id='commands-and-command-handlers-the-write-pipeline'>Commands and Command Handlers - The Write Pipeline</h1>
<blockquote>
<p>You can create a command manually or using the generator provided with the <code>boost</code> CLI tool. Let&#39;s create a command to confirm a payment:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>boost new:command ConfirmPayment <span class="nt">--fields</span> cartID:UUID confirmationToken:string
</code></pre></div>
<blockquote>
<p>You can specify as many fields as you want, and Booster will generate a class for you in the <code>src/commands</code> folder that more or less will look like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">Command</span><span class="p">({</span>
  <span class="na">authorize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="p">,</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">ConfirmPayment</span> <span class="p">{</span>
  <span class="kr">public</span> <span class="kd">constructor</span><span class="p">(</span><span class="nx">readonly</span> <span class="nx">cartID</span><span class="p">:</span> <span class="nx">UUID</span><span class="p">,</span> <span class="nx">readonly</span> <span class="nx">confirmationToken</span><span class="p">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{}</span>

  <span class="kr">public</span> <span class="nx">handle</span><span class="p">(</span><span class="nx">register</span><span class="p">:</span> <span class="nx">Register</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="c1">// The `register` parameter injected can be used to register any number of events.</span>
    <span class="nx">register</span><span class="p">.</span><span class="nx">events</span><span class="p">(</span><span class="k">new</span> <span class="nx">CartPaid</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cartId</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">confirmationToken</span><span class="p">))</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Commands and Command Handlers define the <strong>write</strong> API of your application (highlighted in yellow in the diagram). Commands are objects that are sent to the <code>/commands</code> endpoint. The usage of this endpoint is explained <a href="#booster-cloud-framework-rest-api">in the REST API section</a>.</p>

<p>Similarly to controllers in a traditional <a href="https://www.martinfowler.com/eaaCatalog/modelViewController.html">MVC</a> architecture, commands are synchronously dispatched by a <em>handler</em> method, which will be in charge of validating the input and registering one or more <a href="#events">events</a> in the system. While command handlers can run arbitrary code, it is recommended to keep them small, focusing on data acceptance and delegating as much logic to <a href="#events">event handlers</a>.</p>

<aside class="notice">
Event registration is not mandatory, but we <b>strongly</b> recommend registering at least one event for any possible final state, even in the case of a failure, to make your application activity easier to trace and debug.
</aside>

<p>A command is a class, decorated with the <code>@Command</code> decorator, that defines a data structure
and a <code>handle</code> method. The method will process the commands and optionally generate and persist
one or more events to the event store.</p>

<p>Note how no magic happened in the generator. The only thing that required for Booster to know that this class is a
command, is the <code>@Command</code> decorator. You could get the same result by writing the class yourself 😉</p>
<h1 id='events'>Events</h1>
<blockquote>
<p>To create an event class, you can do the same thing that you did with a command, either manually, or with the generator, using the <code>boost</code> command line tool:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>  boost new:event &lt;name of the event&gt; <span class="nt">--fields</span> fieldName:fieldType
</code></pre></div>
<blockquote>
<p>Booster will generate a class for you in the <code>src/events</code> folder:</p>
</blockquote>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code>  <span class="p">@</span><span class="nd">Event</span>
  <span class="k">export</span> <span class="kd">class</span> <span class="nx">CartPaid</span> <span class="p">{</span>
    <span class="kr">public</span> <span class="kd">constructor</span><span class="p">(</span><span class="nx">readonly</span> <span class="nx">cartID</span><span class="p">:</span> <span class="nx">UUID</span><span class="p">,</span> <span class="nx">readonly</span> <span class="nx">confirmationToken</span><span class="p">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{}</span>

    <span class="kr">public</span> <span class="nx">entityID</span><span class="p">():</span> <span class="nx">UUID</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">cartId</span>
    <span class="p">}</span>
  <span class="p">}</span>
</code></pre></div>
<p>An event is a data structure that represents a <strong>fact</strong> and is the source of truth for your application. Instead of mutating your database, you store an event representing that mutation. Think of your bank account, instead of storing your balance in some database table, mutating the value every time you perform an operation, it stores events for each of them. The balance is then calculated on the fly and shown to you any time you request it. Two examples of events in your bank account would be:</p>

<ul>
<li><code>WithdrawMoney</code></li>
<li><code>DepositMoney</code></li>
</ul>

<p>You can define as many event handler classes as you want to react to them. For example, imagine that a specific event represents that your account has reached zero. You can write a handler to notify the user by email. In a Booster application, it is recommended to write most your domain logic in event handlers.</p>

<p>Notice the required <code>entityID</code> method. All events are grouped by their event type and the value returned by <code>entityID</code>. All events are somehow tied to a concept in your domain model, in our bank account example, this could be the account number.</p>

<p>In the previous example, the <code>CartPaid</code> event has a <code>cartID</code> field, which then you will return in the <code>entityID</code> method. This allows booster to find this event when the system requests to build the state of a specific Cart.</p>

<p>In most situations your event stream will be reduced to a domain model object, like that Cart (An <a href="#entities">Entity</a>), but there are some use cases on which the event stream is just related to a specific entity, for example, a register of sensor values in a weather station, which are related to the station, but the station has no specific value that needs to be reduced. You can implement the semantics that best suit your needs.</p>
<h2 id='event-handlers'>Event Handlers</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">EventHandler</span><span class="p">(</span><span class="nx">CartPaid</span><span class="p">)</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CartPaidHandler</span> <span class="p">{</span>
  <span class="kr">public</span> <span class="kd">static</span> <span class="nx">handle</span><span class="p">(</span><span class="nx">event</span><span class="p">:</span> <span class="nx">CartPaid</span><span class="p">,</span> <span class="nx">register</span><span class="p">:</span> <span class="nx">Register</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">register</span><span class="p">.</span><span class="nx">events</span><span class="p">(</span><span class="k">new</span> <span class="nx">OrderPreparationStarted</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">cartID</span><span class="p">))</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>You can react to events implementing an <strong>Event Handler</strong> class. An Event Handler is a regular class that is subscribed to an event with the decorator <code>@EventHandler(&lt;name of the event class&gt;</code>. Any time that a new event is added to the event store, the <code>handle</code> method in the event handler will be called with the instance of the event and the <code>register</code> object that can be used to emit new events. Event handlers can run arbitrary code and is where it is recommended to write most of the business logic in a reactive way.</p>
<h1 id='entities'>Entities</h1>
<blockquote>
<p>To create an entity... You guessed it! We use the <code>boost</code> tool:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>boost new:entity &lt;name of the entity&gt; <span class="nt">--fields</span> fieldName:fieldType <span class="nt">--reduces</span> EventOne EventTwo EventThree
</code></pre></div>
<blockquote>
<p>For instance, running the following command:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>boost new:entity Order <span class="nt">--fields</span> shippingAddress:Address orderItems:<span class="s2">"Array&lt;OrderItem&gt;"</span> <span class="nt">--reduces</span> OrderCreated
</code></pre></div>
<blockquote>
<p>It will generate a class in the <code>src/entities</code> folder with the following structure:</p>
</blockquote>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">Entity</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">Order</span> <span class="p">{</span>
  <span class="kr">public</span> <span class="kd">constructor</span><span class="p">(</span><span class="nx">readonly</span> <span class="nx">id</span><span class="p">:</span> <span class="nx">UUID</span><span class="p">,</span> <span class="nx">readonly</span> <span class="nx">shippingAddress</span><span class="p">:</span> <span class="nx">Address</span><span class="p">,</span> <span class="nx">readonly</span> <span class="nx">orderItems</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">OrderItem</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{}</span>

  <span class="p">@</span><span class="nd">Reduces</span><span class="p">(</span><span class="nx">OrderCreated</span><span class="p">)</span>
  <span class="kr">public</span> <span class="kd">static</span> <span class="nx">createOrder</span><span class="p">(</span><span class="nx">event</span><span class="p">:</span> <span class="nx">OrderCreated</span><span class="p">,</span> <span class="nx">previousOrder</span><span class="p">?:</span> <span class="nx">Order</span><span class="p">):</span> <span class="nx">Order</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">order</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Entities are not shown in the diagram because they&#39;re just a different view of the data in the events store.</p>

<p>Entities represent domain model objects, that is, something that can be mapped to an object with semantics in your domain. Entities only exist conceptually, they&#39;re not explicitly stored in any database, but generated on the fly from a list of related <a href="#events">events</a>.</p>

<p>Booster creates snapshots of the entities automatically under the hoods to reduce access times, but the developer doesn&#39;t has to worry about that.</p>

<p>Examples of entities are:</p>

<ul>
<li>A Cart</li>
<li>An Account</li>
<li>A User</li>
</ul>

<p>As you can see, entities are also regular TypeScript classes, like the rest of the Booster artifacts.</p>

<p>Take a look, entities have a special <strong>reducer function</strong> decorated with <code>@Reduces</code>,
that will be triggered each time that a specific kind of event is generated.</p>

<p>All projection functions receive:</p>

<ul>
<li>The event</li>
<li>A possible previous state (note the <code>?</code> meaning that there could be no previous state. i.e. when the app is just starting)</li>
</ul>

<p>And it <strong>always</strong> must return a new entity. This function <strong>must be pure</strong>, which means that it cannot perform any side effects, only create a new object based on some conditions on the input data, and then return it.</p>
<h2 id='reading-entity-quot-state-quot'>Reading Entity &quot;state&quot;</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">Command</span><span class="p">({</span>
  <span class="na">authorize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="p">,</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">MoveStock</span> <span class="p">{</span>
  <span class="kr">public</span> <span class="kd">constructor</span><span class="p">(</span><span class="nx">readonly</span> <span class="nx">productSKU</span><span class="p">:</span> <span class="nx">UUID</span><span class="p">,</span> <span class="nx">readonly</span> <span class="nx">fromLocationId</span><span class="p">:</span> <span class="nx">UUID</span><span class="p">,</span> <span class="nx">readonly</span> <span class="nx">toLocationId</span><span class="p">:</span> <span class="nx">UUID</span><span class="p">,</span> <span class="nx">readonly</span> <span class="nx">quantity</span><span class="p">:</span> <span class="nx">number</span><span class="p">)</span> <span class="p">{}</span>

  <span class="kr">public</span> <span class="nx">handle</span><span class="p">(</span><span class="nx">register</span><span class="p">:</span> <span class="nx">Register</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">productStock</span> <span class="o">=</span> <span class="nx">fetchEntitySnapshot</span><span class="p">(</span><span class="dl">'</span><span class="s1">ProductStock</span><span class="dl">'</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">productSKU</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">productStock</span><span class="p">.</span><span class="nx">locations</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">fromLocationId</span><span class="p">].</span><span class="nx">count</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">quantity</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Enough stock, we confirm the movement</span>
      <span class="nx">register</span><span class="p">.</span><span class="nx">events</span><span class="p">(</span><span class="k">new</span> <span class="nx">StockMovement</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">productSKU</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">fromLocationId</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">toLocationID</span><span class="p">,</span> <span class="nx">quantity</span><span class="p">))</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// Not enough stock, we register this fact</span>
      <span class="nx">register</span><span class="p">.</span><span class="nx">events</span><span class="p">(</span><span class="k">new</span> <span class="nx">FailedCommand</span><span class="p">({</span>
        <span class="na">command</span><span class="p">:</span> <span class="k">this</span><span class="p">,</span>
        <span class="na">reason</span><span class="p">:</span> <span class="s2">`Not enough stock in origin location`</span>
      <span class="p">))</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Booster provides a handy <code>fetchEntitySnapshot</code> method to check the value of an entity from any handler method in order to make domain-driven decisions.</p>
<h1 id='read-models-the-read-pipeline'>Read Models - The Read Pipeline</h1>
<blockquote>
<p>TODO: (Not in the current release) To generate a Read Model you can use a read model generator. It works similarly than the entities generator:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>boost new:read-model &lt;name of the <span class="nb">read </span>model class&gt; <span class="nt">--fields</span> fieldName:fieldType <span class="nt">--projects</span> EntityOne EntityTwo
</code></pre></div>
<blockquote>
<p>Using the generator will generate a class with the following structure in <code>src/read-models/&lt;name-of-the-read-model&gt;.ts</code>. For instance:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>boost new:read-model CartReadModel <span class="nt">--fields</span> <span class="nb">id</span>:UUID cartItems:<span class="s2">"Array&lt;CartItem&gt;"</span> paid:boolean <span class="nt">--projects</span> Cart
</code></pre></div>
<blockquote>
<p>It will generate a class with the following structure:</p>
</blockquote>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">ReadModel</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CartReadModel</span> <span class="p">{</span>
  <span class="kr">public</span> <span class="kd">constructor</span><span class="p">(</span>
    <span class="nx">readonly</span> <span class="nx">id</span><span class="p">:</span> <span class="nx">UUID</span><span class="p">,</span>
    <span class="nx">readonly</span> <span class="nx">cartItems</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">CartItem</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="kr">public</span> <span class="nx">paid</span><span class="p">:</span> <span class="nx">boolean</span>
  <span class="p">)</span> <span class="p">{}</span>

  <span class="p">@</span><span class="nd">Projection</span><span class="p">(</span><span class="nx">Cart</span><span class="p">,</span> <span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">)</span>
  <span class="kr">public</span> <span class="kd">static</span> <span class="nx">updateWithCart</span><span class="p">(</span><span class="nx">cart</span><span class="p">:</span> <span class="nx">Cart</span><span class="p">,</span> <span class="nx">oldCartReadModel</span><span class="p">?:</span> <span class="nx">CartReadModel</span><span class="p">):</span> <span class="nx">CartReadModel</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">CartReadModel</span><span class="p">(</span><span class="nx">cart</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">cart</span><span class="p">.</span><span class="nx">cartItems</span><span class="p">,</span> <span class="nx">cart</span><span class="p">.</span><span class="nx">paid</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Read Models are cached data optimized for read operations and they&#39;re updated reactively when <a href="#entities">Entities</a> are updated by new <a href="#events">events</a>. They also define the <em>Read</em> API, the available REST endpoints and their structure.</p>

<p>Read Models are classes decorated with the <code>@ReadModel</code> decorator that have one or more projection methods. A Projection is a method decorated with the <code>@Projection</code> decorator that, given a new entity value and (optionally) a previous read model state, generate a new read model value.</p>

<p>Read models can be projected from multiple <a href="#entities">entities</a> as soon as they share some common key called <code>joinKey</code>.</p>

<p>Read Model classes can also be created by hand and there are no restrictions regarding the place you put the files. The structure of the data is totally open and can be as complex as you can manage in your projection functions.</p>

<p>Defining a read models enables a new REST Read endpoint that you can use to query or poll the read model records <a href="#booster-cloud-framework-rest-api">see the API documentation</a>.</p>
<h1 id='authentication-and-authorization'>Authentication and Authorization</h1>
<blockquote>
<p>For example, the following command can be executed by anyone:</p>
</blockquote>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">Command</span><span class="p">({</span>
  <span class="na">authorize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="p">,</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CreateComment</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>While this one can be executed by authenticated users that have the role <code>Admin</code> or <code>User</code>:</p>
</blockquote>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">Command</span><span class="p">({</span>
  <span class="na">authorize</span><span class="p">:</span> <span class="p">[</span><span class="nx">Admin</span><span class="p">,</span> <span class="nx">User</span><span class="p">],</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">UpdateUser</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>
</code></pre></div>
<p>Authorization in Booster is done through roles. Every Command (and in the future, every ReadModel)
has an <code>authorize</code> policy that tells Booster who can execute or access it. The policy is specified in the
<code>@Command</code> decorator and consists of one of the following two values:</p>

<ul>
<li><code>&#39;all&#39;</code>: Meaning that the command is public: any user, both authenticated and anonymous, can execute it.</li>
<li>An array of authorized roles <code>[Role1, Role2, ...]</code>: This means that only those authenticated users that
have any of the roles listed there are authorized to execute the command</li>
</ul>

<blockquote>
<p>This is an example of a definition of two roles:</p>
</blockquote>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="p">@</span><span class="nd">Role</span><span class="p">({</span>
  <span class="na">allowSelfSignUp</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">Admin</span> <span class="p">{}</span>

<span class="p">@</span><span class="nd">Role</span><span class="p">({</span>
  <span class="na">allowSelfSignUp</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">User</span> <span class="p">{}</span>
</code></pre></div>
<p>By default, a Booster application has no roles defined, so the only allowed value you can use in the <code>authorize</code> policy is <code>&#39;all&#39;</code> (good for public APIs).
If you want to add user authorization, you first need to create the roles that are suitable for your application.
Roles are classes annotated with the <code>@Role</code> decorator, where you can specify some attributes.</p>

<p>Here, we have defined the <code>Admin</code> and <code>User</code> roles. The former contains the following attribute <code>allowSelfSignUp: false</code>,
which means that when users sign-up, they can&#39;t specify the role <code>Admin</code> as one of its roles.
The latter has this attribute set to <code>true</code>, which means that any user can self-assign the role <code>User</code> when signing up.</p>

<p>If your Booster application has roles defined, an authentication API will be provisioned. It will allow your users to gain
access to your resources.</p>

<p>This API consists of three endpoints (<a href="#authentication-and-authorization-api">see the API documentation</a>):</p>

<ul>
<li><code>/auth/sign-up</code>: Users can use this endpoint to register in your application and get some roles assigned to them.
Only roles with the attribute <code>allowSelfSignUp: true</code> can be specified upon sign-up. After calling this endpoint, the
registration is not yet finished. Users need to confirm their emails by clicking in the link that will be sent to their
inbox.</li>
</ul>

<p><img class="image" src="images/sign-up-verificaiton-email-5b526688.png" alt="Confirmation email" />
<img class="image" src="images/sign-up-confirmed-08e631bb.png" alt="Email confirmed" /></p>

<ul>
<li><code>/auth/sign-in</code>: This endpoint creates a session for an already registered user, returning an access token that
can be used to access role-protected resources (like Commands)</li>
<li><code>/auth/sign-out</code>: Users can call this endpoint to finish the session.</li>
</ul>

<p>Once a user has an access token, it can be included in any request made to your Booster application as a
Bearer Authorization header (<code>Authorization: Bearer</code>). It will be used to get the user information and
authorize it to access protected resources.</p>
<h1 id='deploying'>Deploying</h1>
<p>One of the goals of Booster is to become provider agnostic so you can deploy your application to any serverless provider like AWS, Google Cloud, Azure, etc...</p>

<p>So far, in the current version, only AWS is supported, but given the high level of abstraction, it will eventually support
all cloud providers. (<strong>Contributions are welcome!</strong> 😜)</p>
<h2 id='configure-your-provider-credentials'>Configure your provider credentials</h2>
<blockquote>
<p>Creating a plain text file manually named <code>~/.aws/credentials</code> with the following content will be enough:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>[default]
aws_access_key_id = &lt;YOUR KEY ID&gt;
aws_secret_access_key = &lt;YOUR ACCESS KEY&gt;
region = eu-west-1
</code></pre></div>
<p>In the case of AWS, it is required that your <code>~/.aws/credentials</code> are properly setup, and a <code>region</code> attribute is specified. If you have the <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html">AWS CLI installed</a>, you can create the config file by running the command <code>aws configure</code>, but that is completely optional, <strong>AWS CLI is not required to run booster</strong>. </p>

<aside class="notice">
It's recomended to use IAM user keys and avoiding your root access keys. If you need help obtaining a `KEY ID` and `ACCESS KEY`, <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html#Using_CreateAccessKey">check out the oficial AWS guides</a>
</aside>
<h2 id='deploy-your-project'>Deploy your project</h2>
<p>To deploy your Booster project, run the following command:</p>

<p><code>boost deploy</code></p>

<p>It will take a while, but you should have your project deployed to your cloud provider.</p>

<p>If you make changes to your code, you can run <code>boost deploy</code> again to update your project in the cloud.</p>
<h2 id='deleting-your-cloud-stack'>Deleting your cloud stack</h2>
<p>If you want to delete the Booster application that has been deployed to the cloud, you can run:</p>

<p><code>boost nuke</code></p>

<aside class="warning">
<b>Note</b>: This will delete everything in your stack, including databases. This action is <b>not</b> reversible!
</aside>
<h1 id='your-application-api'>Your application API</h1>
<p>The API is generated automatically when you deploy your application, and it changes when needed, no additional steps required on your side.</p>

<p>When you finish deploying your application using the <code>boost deploy</code> command, it will print useful information needed to 
use your API. It will be shown under the &quot;Outputs&quot; section.</p>
<div class="highlight"><pre class="highlight sh tab-shell"><code>Outputs:
&lt;application name&gt;.httpURL <span class="o">=</span> https://&lt;API ID&gt;.execute-api.&lt;region&gt;.amazonaws.com/&lt;environment name&gt;
&lt;application name&gt;.websocketURL <span class="o">=</span> wss://&lt;API ID&gt;.execute-api.&lt;region&gt;.amazonaws.com/&lt;environment name&gt;
&lt;application name&gt;.clientID <span class="o">=</span> abcdXjk1234
</code></pre></div>
<p>The meaning of those values are:</p>

<ul>
<li><strong>httpURL</strong>: This is the base HTTP URL of your application. You will need it to interacting with the 
authentication/authorization API and to send commands and read model queries.</li>
<li><strong>websocketURL</strong>: This is the web socket URL you will need to use to subscribe to your read models and receive
them every time they are updated in real time </li>
<li><strong>clientID</strong>: This parameter is specific for the AWS provider (so you will see only if you used that provider) and is 
needed only for the <code>auth/sign-up</code> and <code>auth/sign-in</code> endpoints.</li>
</ul>

<p>For details, see the following sections.</p>

<aside class="notice">
Note that the <strong>Content-Type</strong> for all requests is always <code>application/json</code>
</aside>
<h2 id='authentication-and-authorization-api'>Authentication and Authorization API</h2>
<p>The following endpoints are provisioned if your application have at least one role defined. For more information about how
to use roles to restrict the access to your application, see the section <a href="#authentication-and-authorization">Authentication and Authorization</a>.</p>
<h3 id='sign-up'>Sign-up</h3>
<p>Register a user in your application. After a successful invocation, an email will be sent to the user&#39;s inbox
with a confirmation link. <strong>Users&#39;s won&#39;t be able to sign-in before they click in that link</strong>.</p>
<h4 id='endpoint'>Endpoint</h4>
<p><code>http request
POST https://&lt;httpURL&gt;/auth/sign-up
</code></p>
<h4 id='request-body'>Request body</h4><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"userAttributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><em>clientId</em></td>
<td>The application client Id that you got as an output when the application was deployed.</td>
</tr>
<tr>
<td><em>username</em></td>
<td>The username of the user you want to register. It <strong>must be an email</strong>.</td>
</tr>
<tr>
<td><em>password</em></td>
<td>The password the user will use to later login into your application and get access tokens.</td>
</tr>
<tr>
<td><em>userAttributes</em></td>
<td>Here you can specify the attributes of your user. These are: <br/> - <em>roles</em>  An array of roles this user will have. You can only specify here roles with the property <code>allowSelfSignUp = true</code></td>
</tr>
</tbody></table>
<h4 id='response'>Response</h4>
<p>An empty body</p>
<h4 id='errors'>Errors</h4>
<blockquote>
<p>Sign-up error response body example: Not specifying an email as username.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"__type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"InvalidParameterException"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Username should be an email."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>You will get an HTTP status code different from 2XX and a body with a message telling you the reason of the error.</p>
<h3 id='sign-in'>Sign-in</h3>
<p>Allows your users to get tokens to be able to make request to restricted endpoints.
Remember that before a user can be signed in into your application, <strong>their email must be confirmed</strong></p>
<h4 id='endpoint-2'>Endpoint</h4>
<p><code>http request
POST https://&lt;httpURL&gt;/auth/sign-in
</code></p>
<h4 id='request-body-2'>Request body</h4><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"password"</span><span class="p">:</span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><em>clientId</em></td>
<td>The application client Id that you got as an output when the application was deployed.</td>
</tr>
<tr>
<td><em>username</em></td>
<td>The username of the user you want to sign in. They must have previously signed up</td>
</tr>
<tr>
<td><em>password</em></td>
<td>The password used to sign up the user.</td>
</tr>
</tbody></table>
<h4 id='response-2'>Response</h4><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"accessToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expiresIn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"refreshToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tokenType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><em>accessToken</em></td>
<td>The token you can use to access restricted resources. It must be sent in the <code>Authorization</code> header (prefixed with the <code>tokenType</code>)</td>
</tr>
<tr>
<td><em>expiresIn</em></td>
<td>The period of time, in seconds, after which the token will expire</td>
</tr>
<tr>
<td><em>refreshToken</em></td>
<td>The token you can use to get a new access token after it has expired.</td>
</tr>
<tr>
<td><em>tokenType</em></td>
<td>The type of token used. It is always <code>Bearer</code></td>
</tr>
</tbody></table>
<h6 id='errors-2'>Errors</h6>
<blockquote>
<p>Sign-in error response body example: Login of an user that has not been confirmed</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"__type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UserNotConfirmedException"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User is not confirmed."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>You will get a HTTP status code different from 2XX and a body with a message telling you the reason of the error.</p>
<h3 id='sign-out'>Sign-out</h3>
<p>Finalizes the user session by cancelling their tokens.</p>
<h6 id='endpoint-3'>Endpoint</h6>
<p><code>http request
POST https://&lt;httpURL&gt;/auth/sign-out
</code></p>
<h6 id='request-body-3'>Request body</h6>
<blockquote>
<p>Sign-out request body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"accessToken"</span><span class="p">:</span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><em>accessToken</em></td>
<td>The access token you get in the sign-in call.</td>
</tr>
</tbody></table>
<h6 id='response-3'>Response</h6>
<p>An empty body</p>
<h6 id='errors-3'>Errors</h6>
<blockquote>
<p>Sign-out error response body example: Invalid access token specified</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"__type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NotAuthorizedException"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Access Token"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>You will get a HTTP status code different from 2XX and a body with a message telling you the reason of the error.</p>
<h2 id='commands-and-readmodels-api'>Commands and ReadModels API</h2>
<p>This is the main API of your application, as it allows you to:</p>

<ul>
<li><em>Modify</em> data by <strong>sending commands</strong></li>
<li><em>Read</em> data by <strong>querying read models</strong></li>
<li><em>Receive data in real time</em> by <strong>subscribing to read models</strong> </li>
</ul>

<p>All this is done through <a href="https://graphql.org/">GraphQL</a>, a query language for APIs that has useful advantages over simple REST APIs.</p>

<p>If you are not familiar with GraphQL, then, first of all, don&#39;t worry! 
<em>Using</em> a GraphQL API is simple and straightforward.
<em>Implementing it</em> on the server side is the hardest part, as you need to define your schema, operation, resolvers, etc.
Luckily, you can forget about that because it is already done by Booster.</p>

<aside class="notice">
The GraphQL API is fully <strong>auto-generated</strong> based on your <em>commands</em> and <em>read models</em>
</aside>
<h3 id='relationship-between-graphql-operations-and-commands-and-read-models'>Relationship between GraphQL operations and commands and read models</h3>
<p>GraphQL defines three kinds of operations that you can use: <em>mutations</em>, <em>queries</em>, and <em>subscriptions</em>. </p>

<p>The names are pretty meaningful, but we can say that you use a <code>mutation</code> when you want to change data, a <code>query</code> when you want to get
data on-demand, and a <code>subscription</code> when you want to receive data at the moment it is updated.</p>

<p>Knowing this, you can infer the relationship between those operations and your Booster components:</p>

<ul>
<li>You <em>send</em> a <strong>command</strong> using a <strong>mutation</strong></li>
<li>You <em>read</em> a <strong>read model</strong> using a <strong>query</strong></li>
<li>You <em>subscribe</em> to a <strong>read model</strong> using a <strong>subscription</strong> </li>
</ul>
<h3 id='how-to-send-graphql-request'>How to send GraphQL request</h3>
<p>GraphQL uses two existing protocols: </p>

<ul>
<li><em>HTTP</em> for <code>mutation</code> and <code>query</code> operations</li>
<li><em>WebSocket</em> for <code>subscription</code> operations</li>
</ul>

<p>The reason for the WebSocket protocol is that, in order for subscriptions to work, there must be a way for the server to send data
to clients when it is changed. HTTP doesn&#39;t allow that, as it is the client the one which always initiates the request.</p>

<p>This is the reason why Booster provisions two main URLs: the <strong>httpURL</strong> and the <strong>websocketURL</strong> (you can see them after
deploying your application). You need to use the &quot;httpURL&quot; to send GraphQL queries and mutations, and the &quot;websocketURL&quot;
to send subscriptions.</p>

<p>Therefore:</p>

<ul>
<li>To send a GraphQL mutation/query, you send an HTTP request to <em>&quot;<httpURL>/graphql&quot;</em>, with <em>method POST</em>, and a <em>JSON-encoded body</em> with the mutation/query deatils.</li>
<li>To send a GraphQL subscription, you first connect to the <em>websocketURL</em>, and then send a <em>JSON-encoded message</em> with the subscription details.</li>
</ul>

<p>Check the following section for details and examples.</p>

<aside class="notice">
You normally don't need to deal with this low-level details. There are plenty of GraphQL clients for sending request manually
(like <a href="https://postwoman.io/">Postwoman</a>) or libraries you can use in the client-side of your application
(like <a href="https://www.apollographql.com/">Apollo</a>)
</aside>
<h3 id='sending-commands'>Sending commands</h3>
<p>As mentioned in the previous section, we need to use a &quot;mutation&quot; to send a command. The structure of a mutation (the body
of the request) is the following:</p>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">command_name</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">input_field_list</span><span class="w">
  </span><span class="p">})</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Where:</p>

<ul>
<li><em>command_name</em> is the name of the class corresponding to the command you want to send</li>
<li><em>field_list</em> is list of pairs in the form of <code>fieldName: fieldValue</code> containing the data of your command. The field names
correspond to the names of the properties you defined in the command class. </li>
</ul>

<p>Check the examples where we send a command named &quot;ChangeCart&quot; that will add/remove an item to/from a shopping cart. The 
command requires the ID of the cart (<code>cartId</code>), the item identifier (<code>sku</code>) and the quantity of units we are adding/removing
(<code>quantity</code>).</p>

<aside class="notice">
Remember that in case you want to send a command that is restricted to a specific set of roles, you must send the <strong>access
token</strong> in the <strong>"Authorization"</strong> header: <em>"Authorization: Bearer &lt;token retrieved upon sign-in&gt;"</em>
</aside>

<blockquote>
<p>Using a GraphQL-specific client:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>URL: "&lt;httpURL&gt;/graphql"
</code></pre></div><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">ChangeCart</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">cartId</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="w">
    </span><span class="n">sku</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC_01"</span><span class="w">
    </span><span class="n">quantity</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">})</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Equivalent bare HTTP request:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>URL: "&lt;httpURL&gt;/graphql"
METHOD: "POST"
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"query"</span><span class="p">:</span><span class="s2">"mutation { ChangeCart(input: { cartId: </span><span class="se">\"</span><span class="s2">demo</span><span class="se">\"</span><span class="s2"> sku: </span><span class="se">\"</span><span class="s2">ABC_01</span><span class="se">\"</span><span class="s2"> quantity: 2 }) }"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Response:
<code>json
{
  &quot;data&quot;: {
    &quot;ChangeCart&quot;: true
  }
}
</code></p>
</blockquote>
<h3 id='reading-read-models'>Reading read models</h3>
<p>To read a specific read model, we need to use a &quot;query&quot; operation. The structure of the &quot;query&quot; (the body
of the request) is the following:</p>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">query</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">read_model_name</span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;id of the read model&gt;"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">selection_field_list</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Where:</p>

<ul>
<li><em>read_model_name</em> is the name of the class corresponding to the read model you want to retrieve.</li>
<li><em>&lt;id of the read model&gt;</em> is the ID of the specific read model instance you are interested in.</li>
<li><em>selection_field_list</em> is a list with the names of the specific read model fields you want to get as response.</li>
</ul>

<p>Check the examples where we send a query to read a read model named &quot;CartReadModel&quot; whose ID is &quot;demo&quot; and we get back as
response its <code>id</code> and the list of cart <code>items</code></p>

<aside class="notice">
Remember that in case you want to query a read model that is restricted to a specific set of roles, you must send the <strong>access
token</strong> in the <strong>"Authorization"</strong> header: <em>"Authorization: Bearer &lt;token retrieved upon sign-in&gt;"</em>
</aside>

<blockquote>
<p>Using a GraphQL-specific client:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>URL: "&lt;httpURL&gt;/graphql"
</code></pre></div><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">query</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">CartReadModel</span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">items</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Equivalent bare HTTP request:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>URL: "&lt;httpURL&gt;/graphql"
METHOD: "POST"
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"query"</span><span class="p">:</span><span class="s2">"query { CartReadModel(id: </span><span class="se">\"</span><span class="s2">demo</span><span class="se">\"</span><span class="s2">) { id items } }"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"CartReadModel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC_01"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='subscribing-to-read-models'>Subscribing to read models</h3>
<p>To subscribe to a specific read model, we need to use a &quot;subscription&quot; operation, and it must be <em>sent through the <strong>websocketURL</strong></em>.</p>

<p>Before sending any subscription, you need to <em>connect</em> to the web socket to open the two-way communication channel. This connection
is done differently depending on the client/library you use to manage web sockets. In this section, we will show examples 
using the <a href="https://github.com/websockets/wscat">&quot;wscat&quot;</a> command line program. </p>

<p>Once you have connected successfully, you can use this channel to:</p>

<ul>
<li>Send the subscription messages</li>
<li>Listen for messages sent by the server with data corresponding to your active subscriptions. </li>
</ul>

<p>The structure of the &quot;subscription&quot; (the body of the message) is exactly the same as the &quot;query&quot; operation:</p>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">subscription</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">read_model_name</span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;id of the read model&gt;"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">selection_field_list</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Where:</p>

<ul>
<li><em>read_model_name</em> is the name of the class corresponding to the read model you want to subscribe to.</li>
<li><em>&lt;id of the read model&gt;</em> is the ID of the specific read model instance you are interested in.</li>
<li><em>selection_field_list</em> is a list with the names of the specific read model fields you want to get when data is sent back to you.</li>
</ul>

<p>In the following examples we use <a href="https://github.com/websockets/wscat">&quot;wscat&quot;</a> to connect to the web socket and send a subscription
to the read model <code>CartReadModel</code> with ID &quot;demo&quot;</p>

<aside class="notice">
Remember that in case you want to subscribe to a read model that is restricted to a specific set of roles, you must send, 
in the <em>connection operation</em>, the <strong>access token</strong> in the <strong>"Authorization"</strong> header: 
<em>"Authorization: Bearer &lt;token retrieved upon sign-in&gt;"</em>
</aside>

<blockquote>
<p>Connecting to the web socket:</p>
</blockquote>
<div class="highlight"><pre class="highlight sh tab-shell"><code> wscat <span class="nt">-c</span> &lt;websocketURL&gt;
</code></pre></div>
<blockquote>
<p>Sending a message with the subscription</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="nl">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription { CartReadModel(id:</span><span class="se">\"</span><span class="s2">demo</span><span class="se">\"</span><span class="s2">) { id items } }"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>After a successful subscription, you won&#39;t receive anything in return. Now, every time the read model you subscribed to
is modified, a new incoming message will appear in the socket with the updated version of the read model. This message
will have exactly the same format as if you were done a query with the same parameters.</p>

<p>Following the previous example, we now send a command (using a &quot;mutation&quot; operation) that adds
a new item with sku &quot;ABC_02&quot; to the <code>CartReadModel</code>. After it has been added, we receive the updated version of the read model through the
socket.</p>

<blockquote>
<p>Send the Command</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>URL: "&lt;httpURL&gt;/graphql"
</code></pre></div><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">ChangeCart</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">cartId</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="w">
    </span><span class="n">sku</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC_02"</span><span class="w">
    </span><span class="n">quantity</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
  </span><span class="p">})</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>The following message appears in the socket</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"CartReadModel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC_01"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC_02"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h1 id='frequently-asked-questions'>Frequently asked questions</h1>
<p><strong>1.- When deploying my application in AWS for the first time, I got an error saying <em>&quot;StagingBucket <your app name>-toolkit-bucket already exists&quot;</em></strong></p>

<p>When you deploy a Booster application to AWS, an S3 bucket needs to be created to upload the application code. Booster names that bucket
using your application name as a prefix. 
In AWS, bucket names must be unique <em>globally</em>, so if there is another bucket in the world with exactly the same name as
the one generated for your application, you will get this error.  </p>

<p>The solution is to change your application name in the configuration file so that the bucket name is unique. </p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
